exit
HelloWorld: exiting terminal. Goodbye.
-------------------------------------------------------?
                                 Boot Manager
--------------------------------------------------------------------------------

                                                         Device Path :
   Boot Manager Menu                                     Fv(7CB8BDC9-F8EB-4F34-
                                                         AAEA-3EE4AF6516A1)/FvF
   Windows Boot Manager                                  ile(7C04A583-9E3E-4F1C
   UEFI V                                                -AD65-E05268D0B4D1)
   UEFI VBOX HARDDISK VB1981ae93-81f869fa
   EFI Internal Shell
   UEFI
   UEFI Generic Mass Storage EE5B4CC2

   Use the <^> and <v> keys to choose a boot option,

   <Esc> key to exit the Boot Manager Menu.


                                                                                                                                                                         -----------------------------------------------------------------------------?
-                                                                              -
- ^v=Move Highlight       <Enter>=Select Entry      Esc=Exit                   -
----------------------------------------------------                      ------




















UEFI Interactive Shell v2.2
EDK II
UEFI v2.70 (EDK II, 0x00010000)
Mapping table
      FS2: Alias(s):CD1b65535a1:;BLK9:
          PciRoot(0x0)/Pci(0xD,0x0)/Sa      FS1: Alias(s):HD1a65535a1:;BLK3:
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x0,0xFFFF,0x0)/HD(1,GPT,E8E2EB58-37EE-4C78-92A6-54137171F738,0x800,0x32000)
      FS0: Alias(s):HD0a0b:;BLK1:
          PciRoot(0x0)/Pc     BLK2: Alias(s):
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x0,0xFFFF,0x0)
     BLK7: Al     BLK8: Alias(s):
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x1,0xFFFF,0x0)/CDROM(0x0)
     BLK4: Alias(s):
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x0,0xFFFF,0x0)/HD(2     BLK5: Alias(s):
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x0,0xFFFF,0x0)/HD(3,GPT,3E40FC3D-BF0C-48A7-BB17-4E423EDB38B8,0x3A800,0x76BB44F)
     BLK6: Alias(s):
          PciRoot(0x0)/Pci(0xD,0x0)/Sata(0x0,0xFFFF,0x0)/HD(4,G     BLK0: Alias(s):
          PciRoot(0x0)/Pci(0xB,0x0)/USB(0x0,0x0)




Press ESC in 5 seconds to skip startup.nsh or any other key to continue.
Shell> fs0:
FS0:\EFI\BOOT\myApps\> clsT\myApps\
10/15/2025  00:16 <DIR>         4,096  .
10/15/2025  00:16 <DIR>         4,096  ..
10/16/2025  17:34 <DIR>         4,096  13-10-2025-demousb
10/13/2025  14:03              86,016  bootx64_1310.efi
10/15/2025  14:06 <DIR>         4,096  bth
10/15/2025  14:08 <DIR>         4,096  demo2 - green nasm
01/05/2025  15:01              10,624  green.efi
10/17/2025  01:44              94,208  helloworld.efi
10/16/2025  16:19              65,536  helloworld1.efi
10/13/2025  14:03              86,016  helloworld_1310.efi
10/16/2025  17:24              69,632  helloworld_usb1.efi
10/14/2025  16:13              94,208  helloworld_x.efi
10/15/2025  17:08 <DIR>         4,096  shellv2
          7 File(s)     506,240 bytes
          6 Dir(s)
FS0:\EFI\BOOT\myApps\> helloworld
UsbDiagApp: Starting USB diagnostic s--- Stage 1: Scan PCI bus for USB class devices ---
PCI 00:00.0  Class=0x06 SubClass=0x00 ProgIf=0x00
PCI 00:01.0  Class=0x06 SubClass=0x01 ProgIf=0x00
PCI 00:02.0  Class=0x03 SubClass=0x00 ProgIf=0x00
PCI 00:03.0  Class=0x02 SubClass=0x00 ProgIfPCI 00:04.0  Class=0x08 SubClass=0x80 ProgIf=0x00
PCI 00:05.0  Class=0x04 SubClass=0x01 ProgIf=0x00
PCI 00:06.0  Class=0x0C SubClass=0x03 ProgIf=0x10
  -> Detected USB controller (PCI class 0x0C/0x03). Try to locate HC protocols on same handle.
PCI 00:07.0  Class=0x06 SubClass=0x80 ProgIf=0x00
PCI 00:0B.0  Class=0x0C  PCI 00:0D.0  Class=0x01 SubClass=0x06 ProgIf=0x01
--- Stage 2: Find published USB Host Controller protocols ---
Found 1 USB2_HC protocol handle(s)
No USB_HC handles found (Status=0x800000000000000E)
--- Mapping USB2_HC handles to PCI B:D.F ---
  USB2_HC handle 0 -> PCI 00:0B.0 (Segment=0)
---     USBCMD=0x00000000 USBSTS=0x00000000 USBINTR=0x00000000 FRINDEX=0x00000000
    PERIODICLISTBASE=0x00000000 ASYNCLISTADDR=0x00000000
    HCSPARAMS(raw)=0x00000200  (N_PORTS approx=0)
      PORT0: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT1: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT2: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortS      PORT3: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT4: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT5: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT6: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT7: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT8: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT9: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT10: PORTSC raw=0x00000100        PORT11: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=0)
      PORT12: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
      PORT13: PORTSC raw=0xFFFFFFFF        PORT14: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
      PORT15: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
--- EHCI probe for PCI 00:0B.0 | PROGIF 20 ---
  BAR0: CAPLENGTH=0x20 HCIVERSION=0x0    USBCMD=0x00080B71 USBSTS=0x0000C028 USBINTR=0x00000000 FRINDEX=0x0005F6E0
    PERIODICLISTBASE=0x00000000 ASYNCLISTADDR=0x7DF5B080
    HCSPARAMS(raw)=0x0000000C  (N_PORTS approx=12)
      PORT0: PORTSC raw=0x00001005  (CCS=1 CSC=0 PE=1 PortSpeed=0 PO=0)
      PORT1: PORTSC raw=0x00003000  (      PORT2: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT3: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT4: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT5: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT6: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT7: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT8: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT9: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT10: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT11: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PortSpeed=0 PO=1)
      PORT12: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
      PORT13: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
      PORT14: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
      PORT15: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PortSpeed=3 PO=1)
--- Examining USB controllers: ports vs published EFI_USB_IO_PROTOCOL handles ---
Total EFI_USB_IO_PROTOCOL handles in USB controller at PCI 00:06.0  ProgIf=0x10
  BAR0 CAPLENGTH=0x10  USBCMD=0x00000000 USBSTS=0x00000000 HCSPARAMS(raw)=0x00000200
      PORT1: PORTSC raw=0x00010101  (        -> Port1 connected but not enabled (PE=0). Enumeration may not have completed.
      PORT2: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
        -> Port2 connected but not enabled (PE=0). Enumeration may not have completed.
      PORT3: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT4: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT5: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT6: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0       PORT7: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT8: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT9: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT10: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT11: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT12: PORTSC raw=0x00000100  (CCS=0 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
      PORT13: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port13 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT14: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port14 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT15: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port15 connected but PO (Port Owner) set: companion contro      PORT16: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port16 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT17: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port17 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT18: PORTSC raw=0xFFFFFFFF          -> Port18 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT19: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port19 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT20: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port20 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT21: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port21 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT22: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port22 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT23: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port23 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT24: PORTSC raw=0xFFFFFFFF          -> Port24 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT25: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=        -> Port25 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT26: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port26 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT27: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port27 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT28: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port28 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT29: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port29 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT30: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port30 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT31: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port31 connected but PO (Port Owner) set: companion controller likely owns this port.
      PORT32: PORTSC raw=0xFFFFFFFF  (CCS=1 CSC=1 PE=1 PEchg=1 PO=1 Speed=3)
        -> Port32 connected but PO (Port Owner) set: companion controller likely owns this port.
  Summary for controller 00:06.0: ConnectedPorts=22
  Notice: 22 connected ports vs 1 UsbIo device handles overall. Some devices may be un-enumerate  Host Controller appears stopped (USBCMD.Run/Stop = 0). The HC driver may not have started the schedule.
USB controller at PCI 00:0B.0  ProgIf=0x20
  BAR0 CAPLENGTH=0x20  USBCMD=0x00080B71 USBSTS=0x0000C028 HCSPARAMS(raw)=0x      PORT1: PORTSC raw=0x00001005  (CCS=1 CSC=0 PE=1 PEchg=0 PO=0 Speed=0)
      PORT2: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT3: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT4: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT5: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT6: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT7: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT8: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT9: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT10: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT11: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
      PORT12: PORTSC raw=0x00003000  (CCS=0 CSC=0 PE=0 PEchg=0 PO=1 Speed=0)
  Summary for controller 00:0B.0: ConnectedPorts=1
  Device-handle count (1) >= connected ports (1) -- enumeration seems to have succeeded globally.
--- End of port enumeration vs handles check ---
Controller PCI BAR0: Found port 1 wit  No HC protocol handle found for this PCI device (driver may not have bound)
    PCI Vendor/Device: 0x003F106B (Vendor=0x106B Device=0x003F)
  Trying DriverBinding.Start() on 55 driver-binding handles...
    DriverBinding handle 7E172B18 Supported() => 0x8000000000000003
    DriverBinding handle 7E172198 Supported() => 0x8000000000000003
    DriverBinding handle 7E170118 Supported() => 0x8000000000000003
    DriverBinding handle 7E170298 Supported() => 0x8000000000000003
    DriverBinding handle 7E162C18 Supported() => 0x8000000000000003
    DriverBinding handle 7E162318 Supported() => 0x8000000000000003
    DriverBinding handle 7E13BC18 Supported() => 0x8000000000000003
    DriverBinding handle 7E13B618 Supported() => 0x8000000000000003
    DriverBinding handle 7E13B798 Suppor    DriverBinding handle 7E164A18 Supported() => 0x8000000000000003
    DriverBinding handle 7E164718 Supported() => 0x8000000000000003
    DriverBinding handle 7E164618 Supported() => 0x8000000000000003
    DriverBinding handle 7E164418 Supported() => 0x8000000000000003
    DriverBinding handle 7E13A818 Supported() => 0x8000000000000003
    DriverBinding handle 7E126A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E125818 Supported() => 0x8000000000000003
    DriverBinding handle 7E122318 Supported() => 0x8000000000000003
    DriverBinding handle 7E123498 Supported() => 0x8000000000000003
    DriverBinding handle 7E124F18 Supported() => 0x8000000000000003
    DriverBinding handle 7E124A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E11A098 Supported() => 0x8000000000000003
    DriverBinding handle 7E11A598 Supported() => 0x8000000000000003
    DriverBinding handle 7E097C18 Supported() => 0x8000000000000003
    DriverBinding handle 7E097418 Supported() => 0x8000000000000003
    DriverBinding handle 7E08BD98 Supported() => 0x8000000000000003
    DriverBinding handle 7E08B498 Supported() => 0x8000000000000003
    DriverBinding handle 7E096E98 Supported() => 0x80000000    DriverBinding handle 7E096718 Supported() => 0x8000000000000003
    DriverBinding handle 7E095318 Supported() => 0x8000000000000003
    DriverBinding handle 7E083698 Supported() => 0x8000000000000003
    DriverBinding handle 7E06B998 Supported() => 0x8000000000000003
    DriverBinding handle 7E06C018 Supported() => 0x8000000000000003
    DriverBinding handle 7E06C298 Supported() => 0    DriverBinding handle 7E054098 Supported() => 0x8000000000000003
    DriverBinding handle 7E054618 Supported() => 0x8000000000000003
    DriverBinding handle 7E053B98 Supported() => 0x8000000000000003
    DriverBinding handle 7E053A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E03C998 Supported() => 0x8000000000000003
    DriverBinding handle 7E03CB98 Supported() => 0x8000000000000003    DriverBinding handle 7E04B098 Supported() => 0x8000000000000003
    DriverBinding handle 7E04B998 Supported() => 0x8000000000000003
    DriverBinding handle 7E04AD18 Supported() => 0x8000000000000003
    DriverBinding handle 7E049B18 Supported() => 0x8000000000000003
    DriverBinding handle 7E049098 Sup    DriverBinding handle 7E049718 Supported() => 0x8000000000000003
    DriverBinding handle 7E049498 Supported() => 0x8000000000000003
    DriverBinding handle 7E048098 Supported() => 0x8000000000000003
    DriverBinding handle 7E03B118 Supported() => 0x8000000000000003
    DriverBinding handle 7E03A098 Supported() => 0x8000000000000003
    DriverBinding handle 7E03A918 Sup    DriverBinding handle 7E02ED98 Supported() => 0x0
      -> Supported; calling Start() now...
      Start() returned 0x800000000000000E
    DriverBinding handle 7E02E198 Supported() => 0x8000000000000003
    DriverBinding handle 7E02DB98 Supported() => 0x8000000000000003
    DriverBinding handle 7E02D818 Supported() => 0x8000000000000003
    DriverBinding handle 7E014118 SuTrying gBS->ConnectController for han  ConnectController failed: 0x800000000000000E
  --- Diagnose: controller BAR0 OpBase=0x010 port=1 ---
    USBCMD=0x00000000 USBSTS=0x00000000 FRINDEX=0x00000000
    ASYNCLISTADDR=0x00000000 PERIODICLISTBASE=0x00000000 HCSPARAMS=0x00000200
      PORT1: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
    NOTE: Host controller Run/Stop == 0 (controller stopped). Driver may not have started schedules.
    NOTE: ASYNCLISTADDR == 0 (no async list programmed).
    NOTE: Async schedule not enabled (USBCMD.AsyncEnable=0).
    NOTE: Periodic schedule not enabled (USBCMD.PeriodicEnable=0).
    Could not determine HC protocol handle by location (best-effort failed).
    Suggestion: ensure HC DXE driver (EHCI/OHCI/UHCI) for this chipset is present in your firmware build.
    Result: connected, not enabled, EHCI owns port -> likely HC scheduling/driver not started.
    Next safe diagnostic steps: (1) v    If you control firmware build: ensure UsbBusDxe and relevant host-controller drivers are included and started.
  --- End diagnose for port 1 ---
  USBCMD still 0 after attempting driver start. Optionally forcing controller run (experimental)...
    Current USBCMD=0x00000000 -> attempting to set Run+Periodic+Async bits (experimental)
    Wrote USBCMD -> ReadBack USBCMD=0x00000031
    TryForceControllerRun returned 0x  --- Diagnose: controller BAR0 OpBas    USBCMD=0x00000031 USBSTS=0x00000031 FRINDEX=0x00000000
    ASYNCLISTADDR=0x00000000 PERIODICLISTBASE=0x00000000 HCSPARAMS=0x00000200
      PORT1: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
    NOTE: ASYNCLISTADDR == 0 (no async list programmed).
    Could not determine HC protocol handle by location (best-effort failed).
    Suggestion: ensure HC DXE driver (EHCI/OHCI/UHCI) for this chipset is present in your firmware build.
    Result: connected, not enabled, EHCI owns port -> likely HC scheduling/driver not started.
    Next safe diagnostic steps: (1) verify HC driver is present in DXE image; (2) enable driver debug logging; (3) check for companion controller and driver.
    If you control firmware build: ensure UsbBusDxe and relevant host-controller drivers are included and started.
  --- End diagnose for port 1 ---
Controller PCI BAR0: Found port 2 with CCS=1 PE=0 PO=0 -> diagnosing deeper
  No HC protocol handle found for this PCI device (driver may not have bound)
    PCI Vendor/Device: 0x003F106B (Vendor=0x106B Device=0x003F)
  Trying DriverBinding.Start() on 55 driver-binding handles...
    DriverBinding handle 7E172B18 Sup    DriverBinding handle 7E172198 Supported() => 0x8000000000000003
    DriverBinding handle 7E170118 Supported() => 0x8000000000000003
    DriverBinding handle 7E170298 Su    DriverBinding handle 7E162C18 Supported() => 0x8000000000000003
    DriverBinding handle 7E162318 Supported() => 0x8000000000000003
    DriverBinding handle 7E13BC18 Supported() => 0x8000000000000003
    DriverBinding handle 7E13B618 Suppor    DriverBinding handle 7E13B798 Supported() => 0x8000000000000003
    DriverBinding handle 7E164A18 Supported() => 0x8000000000000003
    DriverBinding handle 7E164718 Supported() => 0x8000000000000003
    DriverBinding handle 7E164618 Supported() => 0x8000000000000003
    DriverBinding handle 7E164418 Supported() => 0x8000000000000003
    DriverBinding handle 7E13A818 Supported() => 0x8000000000000003
    DriverBinding handle 7E126A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E125818 Supported() => 0x8000000000000003
    DriverBinding handle 7E122318 Supported() => 0x8000000000000003
    DriverBinding handle 7E123498 Supported() => 0x8000000000000003
    DriverBinding handle 7E124F18 Supported() => 0x8000000000000003
    DriverBinding handle 7E124A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E11A098 Su    DriverBinding handle 7E11A598 Supported() => 0x8000000000000003
    DriverBinding handle 7E097C18 Supported() => 0x8000000000000003
    DriverBinding handle 7E097418 Supported() => 0x8000000000000003
    DriverBinding handle 7E08BD98 Supported() => 0x8000000000000003
    DriverBinding handle 7E08B498 Supported() => 0x8000000000000003
    DriverBinding handle 7E096E98 Supported() => 0x8000000000000    DriverBinding handle 7E096718 Supported() => 0x8000000000000003
    DriverBinding handle 7E095318 Supported() => 0x8000000000000003
    DriverBinding handle 7E083698 Supported() => 0x8000000000000003
    DriverBinding handle 7E06B998 Supported() => 0x8000000000000003
    DriverBinding handle 7E06C018 Supported() => 0x8000000000000003
    DriverBinding handle 7E06C298 Supported() => 0x8000000000000003
    DriverBinding handle 7E054098 Supported() => 0x8000000000000003
    DriverBinding handle 7E054618 Supported() => 0x8000000000000003
    DriverBinding handle 7E053B98 Supported() => 0x8000000000000003
    DriverBinding handle 7E053A98 Supported() => 0x8000000000000003
    DriverBinding handle 7E03C998 Supported() => 0x8000000000000003
    DriverBinding handle 7E03CB98 Supported() => 0x8000000000000003
    DriverBinding handle 7E04B098 Supported() => 0x8000000000000003
    DriverBinding handle 7E04B998 Supported() => 0x8000000000000003
    DriverBinding handle 7E04AD18 Supported() => 0x8000000000000003
    DriverBinding handle 7E049B18 Sup    DriverBinding handle 7E049098 Supported() => 0x8000000000000003
    DriverBinding handle 7E049718 Supported() => 0x8000000000000003
    DriverBinding handle 7E049498 Suppo    DriverBinding handle 7E048098 Supported() => 0x8000000000000003
    DriverBinding handle 7E03B118 Supported() => 0x8000000000000003
    DriverBinding handle 7E03A098 Supported() => 0x8000000000000003
    DriverBinding handle 7E03A918 Supported() => 0x8000000000000003
    DriverBinding handle 7E02ED98 Su      -> Supported; calling Start() now...
      Start() returned 0x800000000000000E
    DriverBinding handle 7E02E198 Supported() => 0x8000000000000003
    DriverBinding handle 7E02DB98 Supported() => 0x8000000000000003
    DriverBinding handle 7E02D818 Supported() => 0x8000000000000003
    DriverBinding handle 7E014118 SuTrying gBS->ConnectController for handle 7DFD5698 ...
  ConnectController failed: 0x800000000000000E
  --- Diagnose: controller BAR0 OpBase=0x010 port=2 ---
    USBCMD=0x00000031 USBSTS=0x00000031 FRINDEX=0x00000000
    ASYNCLISTADDR=0x00000000 PERIODICLISTBASE=0x0000000      PORT2: PORTSC raw=0x00010101  (CCS=1 CSC=0 PE=0 PEchg=0 PO=0 Speed=0)
    NOTE: ASYNCLISTADDR == 0 (no asyn    Could not determine HC protocol handle by location (best-effort failed).
    Suggestion: ensure HC DXE driver (EHCI/OHCI/UHCI) for this chipset is present in your firmware build.
    Result: connected, not enabled, EHCI owns port -> likely HC scheduling/driver not started.
    Next safe diagnostic steps: (1) verify HC driver is present in DXE image; (2) enable driver debug logging; (3) check for companion controller and driver.
    If you control firmware build: en  --- End diagnose for port 2 ---
  USBCMD changed to 0x00000031 ??? driver may have started.--- Inspect PCI devices for Vendor=0x106B Device=0x003F ---
Found matching PCI handle: handle=7D  -> PCI location: Segment=0 Bus=00 Dev=06 Func=0
    Vendor/Device = 0x003F106B (Vendor=0x106B Device=0x003F)
    PCI Command = 0x0017 (IO=1 MEM=1    PCI BAR0 = 0x90627000
    PCI config (0x00..0x3C):
      [00] = 0x003F106B
      [04] = 0x00100017
      [08] = 0x0C031000
      [0C] = 0x00000000
      [10] = 0x90627000
      [14] = 0x00000000
      [18] = 0x00000000
      [1C] = 0x00000000
      [20] = 0x00000000
      [24] = 0x00000000
      [28] = 0x00000000
      [2C] = 0x00000000
      [30] = 0x00000000
      [34] = 0x00000000
      [38] = 0x00000000
      [3C] = 0x0000010A
  Scanning 1 EFI_USB_IO_PROTOCOL handles for device path PCI node matching this controller...
--- End Inspect ---

Inspecting PCI device 106B:003F (handle=7DFD5698)
--- Listing all 1 EFI_USB_IO_PROTOCOL handles and USB() nodes ---
UsbIo handle[0] = 7D888718
  DevicePath: T02.S01/Pci(0,11)/USB(0,0)/
  -> USB node: ParentPort=0 Interface=0
  DeviceDescriptor: Vendor=0x058F Product=0x6387 bDeviceClass=0x00
--- End list ---
  DriverBinding handle 7E172B18 Supported() => 0x8000000000000003
  DriverBinding handle 7E172198 Supported() => 0x8000000000000003
  DriverBinding handle 7E170118 Supported() => 0x8000000000000003
  DriverBinding handle 7E170298 Supported() => 0x8000000000000003
  DriverBinding handle 7E162C18 Supported() => 0x8000000000000003
  DriverBinding handle 7E162318 Supported() => 0x8000000000000003
  DriverBinding handle 7E13BC18 Supported() => 0x8000000000000003
  DriverBinding handle 7E13B618 Supported() => 0x8000000000000003
  DriverBinding handle 7E13B798 Supported() => 0x8000000000000003
  DriverBinding handle 7E164A18 Supported() => 0x8000000000000003
  DriverBinding handle 7E164718 Supp  DriverBinding handle 7E164618 Supported() => 0x8000000000000003
  DriverBinding handle 7E164418 Supported() => 0x8000000000000003
  DriverBinding handle 7E13A818 Supported() => 0x8000000000000003
  DriverBinding handle 7E126A98 Supported() => 0x8000000000000003
  DriverBinding handle 7E125818 Supp  DriverBinding handle 7E122318 Supported() => 0x8000000000000003
  DriverBinding handle 7E123498 Supported() => 0x8000000000000003
  DriverBinding handle 7E124F18 Supported() => 0x8000000000000003
  DriverBinding handle 7E124A98 Supported() => 0x8000000000000003
  DriverBinding handle 7E11A098 Supported() => 0x8000000000000003
  DriverBinding handle 7E11A598 Supported() => 0x8000000000000003
  DriverBinding handle 7E097C18 Supported() => 0x8000000000000003
  DriverBinding handle 7E097418 Supported() => 0x8000000000000003
  DriverBinding handle 7E08BD98 Supported() => 0x8000000000000003
  DriverBinding handle 7E08B498 Supported() => 0x8000000000000003
  DriverBinding handle 7E096E98 Supported() => 0x8000000000000003
  DriverBinding handle 7E096718 Supported() => 0x8000000000000003
  DriverBinding handle 7E095318 Supported() => 0x8000000000000003
  DriverBinding handle 7E083698 Supported() => 0x8000000000000003
  DriverBinding handle 7E06B998 Supported() => 0x8000000000000003
  DriverBinding handle 7E06C018 Supported() => 0x8000000000000003
  DriverBinding handle 7E06C298 Supp  DriverBinding handle 7E054098 Supported() => 0x8000000000000003
  DriverBinding handle 7E054618 Suppor  DriverBinding handle 7E053B98 Supported() => 0x8000000000000003
  DriverBinding handle 7E053A98 Supported() => 0x8000000000000003
  DriverBinding handle 7E03C998 Supported() => 0x8000000000000003
  DriverBinding handle 7E03CB98 Supported() => 0x8000000000000003
  DriverBinding handle 7E04B098 Supported() => 0x8000000000000003
  DriverBinding handle 7E04B998 Supported() => 0x8000000000000003
  DriverBinding handle 7E04AD18 Supported() => 0x8000000000000003
  DriverBinding handle 7E049B18 Supported() => 0x8000000000000003
  DriverBinding handle 7E049098 Supported() => 0x8000000000000003
  DriverBinding handle 7E049718 Supported() => 0x8000000000000003
  DriverBinding handle 7E049498 Supported() => 0x8000000000000003
  DriverBinding handle 7E048098 Supported() => 0x8000000000000003
  DriverBinding handle 7E03B118 Supported() => 0x8000000000000003
  DriverBinding handle 7E03A098 Suppo  DriverBinding handle 7E03A918 Supported() => 0x8000000000000003
  DriverBinding handle 7E02ED98 Supported() => 0x0
  -> Found supporting driver-binding handle 7E02ED98; calling DumpDriverHandleAndTryBind()
--- DumpDriverHandleAndTryBind => controller=7DFD5698 driverBinding=7E02ED98 ---
  Protocols on driver handle: 5
    [0] GUID ptr=7E172330
    [1] GUID ptr=7E1722B0
    [2] EFI_DRIVER_BINDING_PROTOCOL
    [3] GUID ptr=7E93D630
    [4] EFI_LOADED_IMAGE_PROTOCOL
  LoadedImage: ImageBase=7DFB7000 Fi    Driver image device path: T04.S06/
  ConnectController(controller=7DFD5698, driver=7E02ED98) returned 0x800000000000000E
--- End dump/try ---
UsbDiagApp: Completed checks. You canDone. Press any key to exit...
